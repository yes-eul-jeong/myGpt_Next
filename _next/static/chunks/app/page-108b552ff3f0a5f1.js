(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2277:(e,t,s)=>{Promise.resolve().then(s.bind(s,370))},370:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var a=s(5155),l=s(2115);s(8563);var n=s(9996);s(5793);let r=e=>{let{systemMessage:t,onClose:s}=e,{TopP:r,Temperature:o,APIkey:c,setTopP:i,setTemperature:h,setAPIkey:d}=(0,n.I)(),[u,m]=(0,l.useState)(t);return(0,a.jsx)("div",{className:"popup-wrap",children:(0,a.jsxs)("div",{className:"popup-box",children:[(0,a.jsx)("h2",{children:"커스텀하기"}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h3",{children:"System Message"}),(0,a.jsx)("textarea",{value:u,onChange:e=>m(e.target.value),placeholder:"시스템 메시지를 입력해주세요",className:"system-message"})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h3",{children:"API key"}),(0,a.jsx)("input",{type:"text",value:c,onChange:e=>d(e.target.value),placeholder:"API key를 입력해주세요"})]}),(0,a.jsxs)("div",{className:"section",children:[(0,a.jsxs)("div",{className:"parameter",children:[(0,a.jsxs)("h4",{children:["Top-P ",(0,a.jsx)("span",{children:r})]}),(0,a.jsxs)("div",{className:"range-label",children:[(0,a.jsx)("p",{children:"일관성"}),(0,a.jsx)("p",{children:"다양성"})]}),(0,a.jsx)("input",{type:"range",id:"TopP",max:"1",min:"0",step:"0.1",value:r,onChange:e=>i(parseFloat(e.target.value))})]}),(0,a.jsxs)("div",{className:"parameter",children:[(0,a.jsxs)("h4",{children:["Temperature ",(0,a.jsx)("span",{children:o})]}),(0,a.jsxs)("div",{className:"range-label",children:[(0,a.jsx)("p",{children:"정확성"}),(0,a.jsx)("p",{children:"창의성"})]}),(0,a.jsx)("input",{type:"range",id:"Temperature",min:"0",max:"2",step:"0.1",value:o,onChange:e=>h(parseFloat(e.target.value))})]})]}),(0,a.jsx)("div",{className:"button-wrap",children:(0,a.jsx)("button",{onClick:()=>{localStorage.setItem("systemMessage",u),localStorage.setItem("APIkey",c),localStorage.setItem("TopP",r.toString()),localStorage.setItem("Temperature",o.toString()),s()},children:"닫기"})})]})})},o=e=>{let{onClose:t}=e,[s,r]=(0,l.useState)(!1),[o,c]=(0,l.useState)(!0),{APIkey:i,setAPIkey:h}=(0,n.I)();return(0,l.useEffect)(()=>{"true"===localStorage.getItem("dontShowModi")&&(r(!0),c(!1))},[]),o&&(0,a.jsx)("div",{className:"popup-wrap",children:(0,a.jsxs)("div",{className:"popup-box",children:[(0,a.jsx)("h2",{children:"방문해주셔서 감사합니다!"}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h3",{children:"API Key"}),(0,a.jsx)("p",{children:"API Key가 있으시다면 키를, 없으시다면 제 이름을 한글로 입력해주세요"}),(0,a.jsx)("input",{type:"text",value:i,onChange:e=>h(e.target.value),placeholder:"API key를 입력해주세요"})]}),(0,a.jsx)("div",{className:"button-wrap",children:(0,a.jsx)("button",{onClick:()=>{localStorage.setItem("dontShowModi",String(s)),localStorage.setItem("APIkey",i),c(!1),t(s)},children:"확인"})}),(0,a.jsx)("section",{children:(0,a.jsxs)("label",{htmlFor:"dont-show",children:[(0,a.jsx)("input",{type:"checkbox",id:"dont-show",checked:s,onChange:()=>r(!s)}),"다시 보지 않기"]})})]})})};function c(){let e=(0,l.useRef)(null),[t,s]=(0,l.useState)(""),[n,c]=(0,l.useState)(!0),[i,h]=(0,l.useState)(!1),[d,u]=(0,l.useState)([{role:"system",content:""}]),[m,p]=(0,l.useState)("4em");(0,l.useEffect)(()=>{u([{role:"system",content:localStorage.getItem("systemMessage")||""}])},[]);let x=async a=>{var l;a.preventDefault();let n=[...d,{role:"system",content:localStorage.getItem("systemMessage")||""},{role:"user",content:t},{role:"assistant",content:"생성중"}];u(n);let r=localStorage.getItem("TopP")||"0.5",o=localStorage.getItem("Temperature")||"1",c=localStorage.getItem("APIkey")||"",i=await fetch("/api/openai",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chats:n,topP:r,temperature:o,apiKey:c})}),h=await i.json();if(i.ok)u(e=>{let t=[...e];return t[t.length-1]={role:"assistant",content:h.content},t});else if(!i.ok){console.error("Error:",h);return}s(""),null===(l=e.current)||void 0===l||l.focus()},g=()=>{let e=t.split("\n").length;e<3?p("4em"):e<=5?p("".concat(e+1,"em")):p("6em")};return(0,l.useEffect)(()=>{g()},[t]),(0,a.jsxs)("main",{className:"p-3",children:[(0,a.jsxs)("div",{className:"header-wrap",children:[(0,a.jsx)("h1",{children:"Seul's chatGPT!"}),(0,a.jsx)("button",{onClick:()=>h(!0),className:"btn btn-secondary",children:"커스텀"})]}),(0,a.jsx)("div",{className:"chat-container",children:d.map((e,t)=>"system"!==e.role?(0,a.jsx)("div",{className:"chat-bubble ".concat(e.role),children:(0,a.jsx)("p",{dangerouslySetInnerHTML:{__html:e.content}})},t):null)}),(0,a.jsxs)("form",{onSubmit:x,className:"chat-input",children:[(0,a.jsx)("textarea",{ref:e,value:t,className:"mb-3 form-control",onKeyDown:e=>{"Enter"===e.key&&(e.ctrlKey||e.metaKey)&&x(e)},onChange:e=>s(e.target.value),placeholder:"질문을 입력해주세요",style:{height:m},onInput:g}),(0,a.jsx)("button",{type:"submit",className:"btn btn-primary",children:"보내기"})]}),i&&(0,a.jsx)(r,{onClose:()=>{h(!1)},systemMessage:localStorage.getItem("systemMessage")||""}),n&&(0,a.jsx)(o,{onClose:()=>{c(!1)}})]})}console.log("관심가져주셔서 감사합니다. 해당 서비스는 이력서를 위해 만든 서비스이며, APIKey는 제 사비로 충전하여 사용하고있습니다. 너무 많은 사용은 자제해주시기 바랍니다. 방문해주셔서 감사합니다 좋은 하루 되세요!")},9996:(e,t,s)=>{"use strict";s.d(t,{I:()=>r,SystemProvider:()=>o});var a=s(5155),l=s(2115);let n=(0,l.createContext)(void 0),r=()=>{let e=(0,l.useContext)(n);if(!e)throw Error("useSystemContext must be used within a SystemProvider");return e},o=e=>{let{children:t}=e,[s,r]=(0,l.useState)(""),[o,c]=(0,l.useState)(""),[i,h]=(0,l.useState)(.5),[d,u]=(0,l.useState)(1);return(0,a.jsx)(n.Provider,{value:{systemMessage:s,APIkey:o,TopP:i,Temperature:d,setSystemMessage:r,setAPIkey:c,setTopP:h,setTemperature:u},children:t})}},5793:()=>{},8563:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[837,441,517,358],()=>t(2277)),_N_E=e.O()}]);